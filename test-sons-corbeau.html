<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Test Sons Corbeau ðŸ¦…</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', system-ui, sans-serif;
            background: linear-gradient(135deg, #1a1a2e 0%, #16213e 50%, #0f3460 100%);
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 20px;
        }

        .container {
            background: rgba(255, 255, 255, 0.95);
            border-radius: 20px;
            padding: 40px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.5);
            max-width: 700px;
            width: 100%;
        }

        h1 {
            text-align: center;
            color: #1a1a2e;
            margin-bottom: 10px;
            font-size: 32px;
        }

        .subtitle {
            text-align: center;
            color: #64748b;
            margin-bottom: 30px;
            font-size: 14px;
        }

        .sound-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .sound-btn {
            background: linear-gradient(145deg, #1a1a2e, #0f3460);
            border: none;
            border-radius: 15px;
            padding: 30px 20px;
            color: white;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 6px 15px rgba(0,0,0,0.4);
            position: relative;
            overflow: hidden;
        }

        .sound-btn:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 25px rgba(0,0,0,0.6);
            background: linear-gradient(145deg, #0f3460, #1a1a2e);
        }

        .sound-btn:active {
            transform: translateY(-2px);
        }

        .sound-btn::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.2), transparent);
            transition: left 0.5s;
        }

        .sound-btn:hover::before {
            left: 100%;
        }

        .sound-name {
            font-size: 22px;
            display: block;
            margin-bottom: 8px;
        }

        .sound-desc {
            font-size: 13px;
            opacity: 0.85;
            font-style: italic;
        }

        .section-title {
            color: #1a1a2e;
            font-size: 20px;
            font-weight: 700;
            margin: 35px 0 20px 0;
            padding-bottom: 12px;
            border-bottom: 3px solid #0f3460;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .volume-control {
            text-align: center;
            margin-top: 30px;
            padding: 25px;
            background: linear-gradient(135deg, #f8fafc, #e2e8f0);
            border-radius: 15px;
            box-shadow: inset 0 2px 8px rgba(0,0,0,0.1);
        }

        .volume-control label {
            color: #1a1a2e;
            font-weight: 700;
            margin-right: 15px;
            font-size: 16px;
        }

        .volume-control input {
            width: 250px;
            height: 8px;
            border-radius: 5px;
            outline: none;
        }

        .volume-value {
            display: inline-block;
            min-width: 50px;
            font-weight: bold;
            color: #0f3460;
            margin-left: 10px;
        }

        .info {
            text-align: center;
            color: #64748b;
            font-size: 14px;
            margin-top: 25px;
            font-style: italic;
        }

        .crow-emoji {
            font-size: 48px;
            text-align: center;
            margin-bottom: 20px;
            animation: float 3s ease-in-out infinite;
        }

        @keyframes float {
            0%, 100% { transform: translateY(0px); }
            50% { transform: translateY(-10px); }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="crow-emoji">ðŸ¦…</div>
        <h1>Sons du Corbeau</h1>
        <p class="subtitle">Teste les diffÃ©rents sons pour le corbeau malÃ©fique</p>

        <div class="section-title">ðŸŽ­ Sons Existants</div>
        <div class="sound-grid">
            <button class="sound-btn" onclick="playCrow()">
                <span class="sound-name">Feuuuux</span>
                <span class="sound-desc">Souffle qui s'Ã©teint</span>
            </button>
        </div>

        <div class="section-title">âœ¨ Nouveaux Sons</div>
        <div class="sound-grid">
            <button class="sound-btn" onclick="playCrowFly()">
                <span class="sound-name">ðŸª¶ Vol</span>
                <span class="sound-desc">Battements d'ailes</span>
            </button>
            <button class="sound-btn" onclick="playCrowLaugh()">
                <span class="sound-name">ðŸ˜ˆ Rire</span>
                <span class="sound-desc">Rire malÃ©fique</span>
            </button>
            <button class="sound-btn" onclick="playCrowExplosion()">
                <span class="sound-name">ðŸ’¥ Explosion</span>
                <span class="sound-desc">Bang + Rumble</span>
            </button>
        </div>

        <div class="section-title">ðŸŽª Variations Fafaah</div>
        <div class="sound-grid">
            <button class="sound-btn" onclick="playFafaah()">
                <span class="sound-name">Fafaah</span>
                <span class="sound-desc">Cri classique</span>
            </button>
            <button class="sound-btn" onclick="playFafaahGrave()">
                <span class="sound-name">Fafaah Grave</span>
                <span class="sound-desc">Version profonde</span>
            </button>
            <button class="sound-btn" onclick="playFafaahCourt()">
                <span class="sound-name">Fafaah Court</span>
                <span class="sound-desc">Version rapide</span>
            </button>
        </div>

        <div class="volume-control">
            <label for="volume">ðŸ”Š Volume :</label>
            <input type="range" id="volume" min="0" max="100" value="40">
            <span class="volume-value" id="volumeValue">40%</span>
        </div>

        <p class="info">Teste tous les sons pour choisir les meilleurs moments ! ðŸ¦…</p>
    </div>

    <script>
        const audioCtx = new (window.AudioContext || window.webkitAudioContext)();
        let masterVolume = 0.7;

        document.getElementById('volume').addEventListener('input', (e) => {
            masterVolume = e.target.value / 100;
            document.getElementById('volumeValue').textContent = e.target.value + '%';
        });

        // Mettre Ã  jour l'affichage initial
        document.getElementById('volume').value = 70;
        document.getElementById('volumeValue').textContent = '70%';

        // Son "feuuuux" - souffle qui s'Ã©teint (son actuel du corbeau)
        function playCrow() {
            const noise = audioCtx.createBufferSource();
            const buffer = audioCtx.createBuffer(1, audioCtx.sampleRate * 1.5, audioCtx.sampleRate);
            const data = buffer.getChannelData(0);

            for (let i = 0; i < buffer.length; i++) {
                const progress = i / buffer.length;
                const fade = Math.exp(-progress * 4);
                const variation = Math.sin(i / 500) * 0.2;
                data[i] = (Math.random() * 2 - 1) * fade * (0.6 + variation);
            }

            noise.buffer = buffer;

            const filter = audioCtx.createBiquadFilter();
            filter.type = 'lowpass';
            filter.frequency.setValueAtTime(600, audioCtx.currentTime);
            filter.frequency.exponentialRampToValueAtTime(200, audioCtx.currentTime + 1.5);

            const gain = audioCtx.createGain();
            gain.gain.setValueAtTime(0, audioCtx.currentTime);
            gain.gain.linearRampToValueAtTime(masterVolume * 0.3, audioCtx.currentTime + 0.08);
            gain.gain.linearRampToValueAtTime(masterVolume * 0.25, audioCtx.currentTime + 0.4);
            gain.gain.exponentialRampToValueAtTime(0.001, audioCtx.currentTime + 1.5);

            noise.connect(filter);
            filter.connect(gain);
            gain.connect(audioCtx.destination);

            noise.start();
        }

        // Son de vol du corbeau - battements d'ailes
        function playCrowFly() {
            for (let i = 0; i < 3; i++) {
                setTimeout(() => {
                    const noise = audioCtx.createBufferSource();
                    const buffer = audioCtx.createBuffer(1, audioCtx.sampleRate * 0.15, audioCtx.sampleRate);
                    const data = buffer.getChannelData(0);

                    for (let j = 0; j < buffer.length; j++) {
                        const t = j / buffer.length;
                        const envelope = Math.exp(-t * 8);
                        data[j] = (Math.random() * 2 - 1) * envelope * 0.7;
                    }

                    noise.buffer = buffer;

                    const filter = audioCtx.createBiquadFilter();
                    filter.type = 'lowpass';
                    filter.frequency.value = 400 + Math.random() * 200;

                    const gain = audioCtx.createGain();
                    gain.gain.value = masterVolume * (0.35 - i * 0.05);

                    noise.connect(filter);
                    filter.connect(gain);
                    gain.connect(audioCtx.destination);

                    noise.start();
                }, i * 120);
            }
        }

        // Son de rire malÃ©fique du corbeau
        function playCrowLaugh() {
            const frequencies = [600, 500, 400];
            const durations = [0.15, 0.15, 0.3];

            frequencies.forEach((freq, i) => {
                setTimeout(() => {
                    const osc = audioCtx.createOscillator();
                    const gain = audioCtx.createGain();
                    const filter = audioCtx.createBiquadFilter();

                    osc.type = 'square';
                    filter.type = 'lowpass';
                    filter.frequency.value = 800;

                    osc.connect(filter);
                    filter.connect(gain);
                    gain.connect(audioCtx.destination);

                    osc.frequency.setValueAtTime(freq, audioCtx.currentTime);
                    osc.frequency.linearRampToValueAtTime(freq * 0.9, audioCtx.currentTime + durations[i]);

                    const vol = masterVolume * (0.25 - i * 0.03);
                    gain.gain.setValueAtTime(0, audioCtx.currentTime);
                    gain.gain.linearRampToValueAtTime(vol, audioCtx.currentTime + 0.02);
                    gain.gain.exponentialRampToValueAtTime(0.001, audioCtx.currentTime + durations[i]);

                    osc.start();
                    osc.stop(audioCtx.currentTime + durations[i]);
                }, i * 180);
            });
        }

        // Son d'explosion du corbeau
        function playCrowExplosion() {
            // 1. Bang initial aigu
            const osc = audioCtx.createOscillator();
            const gainOsc = audioCtx.createGain();
            const filterOsc = audioCtx.createBiquadFilter();

            osc.type = 'sawtooth';
            filterOsc.type = 'lowpass';
            filterOsc.frequency.setValueAtTime(2000, audioCtx.currentTime);
            filterOsc.frequency.exponentialRampToValueAtTime(100, audioCtx.currentTime + 0.3);

            osc.connect(filterOsc);
            filterOsc.connect(gainOsc);
            gainOsc.connect(audioCtx.destination);

            osc.frequency.setValueAtTime(800, audioCtx.currentTime);
            osc.frequency.exponentialRampToValueAtTime(50, audioCtx.currentTime + 0.3);

            gainOsc.gain.setValueAtTime(masterVolume * 0.5, audioCtx.currentTime);
            gainOsc.gain.exponentialRampToValueAtTime(0.001, audioCtx.currentTime + 0.3);

            osc.start();
            osc.stop(audioCtx.currentTime + 0.3);

            // 2. Rumble grave (bruit)
            const noise = audioCtx.createBufferSource();
            const buffer = audioCtx.createBuffer(1, audioCtx.sampleRate * 0.6, audioCtx.sampleRate);
            const data = buffer.getChannelData(0);

            for (let i = 0; i < buffer.length; i++) {
                const t = i / buffer.length;
                const envelope = Math.exp(-t * 3);
                data[i] = (Math.random() * 2 - 1) * envelope;
            }

            noise.buffer = buffer;

            const filterNoise = audioCtx.createBiquadFilter();
            filterNoise.type = 'lowpass';
            filterNoise.frequency.setValueAtTime(300, audioCtx.currentTime);
            filterNoise.frequency.exponentialRampToValueAtTime(100, audioCtx.currentTime + 0.6);

            const gainNoise = audioCtx.createGain();
            gainNoise.gain.setValueAtTime(masterVolume * 0.4, audioCtx.currentTime + 0.05);
            gainNoise.gain.exponentialRampToValueAtTime(0.001, audioCtx.currentTime + 0.6);

            noise.connect(filterNoise);
            filterNoise.connect(gainNoise);
            gainNoise.connect(audioCtx.destination);

            noise.start(audioCtx.currentTime + 0.05);
        }

        // Fafaah - Cri de corbeau classique
        function playFafaah() {
            const noise = audioCtx.createBufferSource();
            const buffer = audioCtx.createBuffer(1, audioCtx.sampleRate * 0.6, audioCtx.sampleRate);
            const data = buffer.getChannelData(0);

            for (let i = 0; i < buffer.length; i++) {
                const t = i / audioCtx.sampleRate;
                const envelope = Math.exp(-t * 3) * (1 + Math.sin(t * 40) * 0.3);
                data[i] = (Math.random() * 2 - 1) * envelope * 0.6;
            }

            noise.buffer = buffer;

            const filter = audioCtx.createBiquadFilter();
            filter.type = 'bandpass';
            filter.frequency.setValueAtTime(800, audioCtx.currentTime);
            filter.frequency.exponentialRampToValueAtTime(500, audioCtx.currentTime + 0.6);
            filter.Q.value = 3;

            const gain = audioCtx.createGain();
            gain.gain.setValueAtTime(0, audioCtx.currentTime);
            gain.gain.linearRampToValueAtTime(masterVolume * 0.4, audioCtx.currentTime + 0.05);
            gain.gain.linearRampToValueAtTime(masterVolume * 0.35, audioCtx.currentTime + 0.3);
            gain.gain.exponentialRampToValueAtTime(0.001, audioCtx.currentTime + 0.6);

            noise.connect(filter);
            filter.connect(gain);
            gain.connect(audioCtx.destination);

            noise.start();
        }

        // Fafaah Grave - Version plus profonde
        function playFafaahGrave() {
            const noise = audioCtx.createBufferSource();
            const buffer = audioCtx.createBuffer(1, audioCtx.sampleRate * 0.8, audioCtx.sampleRate);
            const data = buffer.getChannelData(0);

            for (let i = 0; i < buffer.length; i++) {
                const t = i / audioCtx.sampleRate;
                const envelope = Math.exp(-t * 2.5) * (1 + Math.sin(t * 30) * 0.4);
                data[i] = (Math.random() * 2 - 1) * envelope * 0.7;
            }

            noise.buffer = buffer;

            const filter = audioCtx.createBiquadFilter();
            filter.type = 'bandpass';
            filter.frequency.setValueAtTime(500, audioCtx.currentTime);
            filter.frequency.exponentialRampToValueAtTime(300, audioCtx.currentTime + 0.8);
            filter.Q.value = 4;

            const gain = audioCtx.createGain();
            gain.gain.setValueAtTime(0, audioCtx.currentTime);
            gain.gain.linearRampToValueAtTime(masterVolume * 0.45, audioCtx.currentTime + 0.08);
            gain.gain.linearRampToValueAtTime(masterVolume * 0.4, audioCtx.currentTime + 0.4);
            gain.gain.exponentialRampToValueAtTime(0.001, audioCtx.currentTime + 0.8);

            noise.connect(filter);
            filter.connect(gain);
            gain.connect(audioCtx.destination);

            noise.start();
        }

        // Fafaah Court - Version rapide
        function playFafaahCourt() {
            const noise = audioCtx.createBufferSource();
            const buffer = audioCtx.createBuffer(1, audioCtx.sampleRate * 0.3, audioCtx.sampleRate);
            const data = buffer.getChannelData(0);

            for (let i = 0; i < buffer.length; i++) {
                const t = i / audioCtx.sampleRate;
                const envelope = Math.exp(-t * 6) * (1 + Math.sin(t * 60) * 0.2);
                data[i] = (Math.random() * 2 - 1) * envelope * 0.5;
            }

            noise.buffer = buffer;

            const filter = audioCtx.createBiquadFilter();
            filter.type = 'bandpass';
            filter.frequency.setValueAtTime(1000, audioCtx.currentTime);
            filter.frequency.exponentialRampToValueAtTime(600, audioCtx.currentTime + 0.3);
            filter.Q.value = 2.5;

            const gain = audioCtx.createGain();
            gain.gain.setValueAtTime(0, audioCtx.currentTime);
            gain.gain.linearRampToValueAtTime(masterVolume * 0.35, audioCtx.currentTime + 0.02);
            gain.gain.exponentialRampToValueAtTime(0.001, audioCtx.currentTime + 0.3);

            noise.connect(filter);
            filter.connect(gain);
            gain.connect(audioCtx.destination);

            noise.start();
        }
    </script>
</body>
</html>
