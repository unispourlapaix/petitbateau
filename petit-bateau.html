<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <title>ðŸš¢ Petit Bateau ðŸš¢</title>
    <style>
        * {
            margin: 0; padding: 0; box-sizing: border-box;
            touch-action: none; user-select: none;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', system-ui, sans-serif;
            background: linear-gradient(180deg, #f8f9fa 0%, #ffffff 25%, #f1f3f4 75%, #e9ecef 100%);
            min-height: 100vh; width: 100%; margin: 0; padding: 0;
            display: flex; align-items: center; justify-content: center;
            color: #2c3e50; overflow: hidden;
        }

        .game-container {
            position: relative;
            width: 100vw; height: 100vh;
            display: flex; align-items: center; justify-content: center;
            overflow: hidden;
        }

        #gameCanvas {
            background: linear-gradient(145deg, #ffffff 0%, #f8f9fa 30%, #ffffff 70%, #f1f3f4 100%);
            border: none; border-radius: 0;
            image-rendering: crisp-edges; image-rendering: pixelated;
        }

        /* Mode PC - Ratio fixe portrait 9:16 */
        @media (min-width: 500px) {
            .game-container {
                width: 450px; height: 800px;
                margin: 0 auto; border-radius: 20px; overflow: hidden;
                box-shadow: 0 0 40px rgba(0,0,0,0.3);
                border: 1px solid rgba(255,255,255,0.1);
            }
        }
    </style>
</head>
<body>
    <div class="game-container">
        <canvas id="gameCanvas"></canvas>
    </div>

    <script>
        console.log("ðŸš¢ Petit Bateau - DÃ©marrage...");

        const canvas = document.getElementById('gameCanvas');
        const ctx = canvas.getContext('2d');

        // Configuration responsive avec ratio fixe
        function setupCanvas() {
            const container = document.querySelector('.game-container');
            const width = container.clientWidth;
            const height = container.clientHeight;

            canvas.width = width;
            canvas.height = height;
            canvas.style.width = width + 'px';
            canvas.style.height = height + 'px';

            return { width, height };
        }

        let size = setupCanvas();
        const C = {
            W: size.width, H: size.height,
            PW: Math.max(size.width * 0.15, 100), // Largeur bateau
            PH: Math.max(size.height * 0.035, 30), // Hauteur bateau
        };

        // Variables du petit bateau
        let bateau = {
            x: C.W / 2 - C.PW / 2,
            y: C.H - C.PH - 50,
            vx: 0,
            vy: 0
        };

        // Dessiner le petit bateau
        function dessinerBateau() {
            ctx.save();

            // Coque principale du bateau
            ctx.fillStyle = '#8b4513';
            ctx.fillRect(bateau.x, bateau.y, C.PW, C.PH);

            // Bordure de la coque
            ctx.strokeStyle = '#654321';
            ctx.lineWidth = 2;
            ctx.strokeRect(bateau.x, bateau.y, C.PW, C.PH);

            // MÃ¢t
            const matX = bateau.x + C.PW * 0.7;
            const matY = bateau.y - C.PH * 3;
            ctx.strokeStyle = '#8b4513';
            ctx.lineWidth = 3;
            ctx.beginPath();
            ctx.moveTo(matX, bateau.y);
            ctx.lineTo(matX, matY);
            ctx.stroke();

            // Voile triangulaire
            ctx.fillStyle = '#f8f9fa';
            ctx.beginPath();
            ctx.moveTo(matX, matY);
            ctx.lineTo(bateau.x + C.PW * 0.2, bateau.y - C.PH * 1.5);
            ctx.lineTo(matX, bateau.y - C.PH * 0.5);
            ctx.closePath();
            ctx.fill();

            // Bordure de la voile
            ctx.strokeStyle = '#ced4da';
            ctx.lineWidth = 2;
            ctx.stroke();

            ctx.restore();
        }

        // Fonction de rendu principal
        function dessiner() {
            // Fond dÃ©gradÃ© selon le backup - ciel diurne
            const grad = ctx.createLinearGradient(0, 0, 0, C.H);
            grad.addColorStop(0, 'rgba(135, 206, 250, 0.98)');
            grad.addColorStop(0.7, 'rgba(176, 224, 230, 0.98)');
            grad.addColorStop(1, 'rgba(240,248,255,0.98)');
            ctx.fillStyle = grad;
            ctx.fillRect(0, 0, C.W, C.H);

            // Dessiner la mer du backup
            dessinerMer();

            // Dessiner le bateau
            dessinerBateau();

            // Interface simple
            ctx.fillStyle = '#2c3e50';
            ctx.font = '16px Arial';
            ctx.fillText('ðŸš¢ Petit Bateau navigue...', 10, 30);
        }

        // Mer du backup
        function dessinerMer() {
            const temps = Date.now() * 0.0005;
            const merY = C.H - 60;

            // Mer bleue paisible du backup
            const merGrad = ctx.createLinearGradient(0, merY, 0, C.H);
            merGrad.addColorStop(0, 'rgba(70, 130, 180, 0.8)');
            merGrad.addColorStop(0.5, 'rgba(100, 150, 200, 0.9)');
            merGrad.addColorStop(1, 'rgba(30, 100, 140, 0.95)');
            ctx.fillStyle = merGrad;
            ctx.fillRect(0, merY, C.W, C.H - merY);

            // Vagues animÃ©es du backup
            ctx.save();
            ctx.strokeStyle = 'rgba(255, 255, 255, 0.3)';
            ctx.lineWidth = 2;

            for(let i = 0; i < 3; i++) {
                ctx.beginPath();
                const amplitude = 8 + i * 3;
                const frequency = 0.02 + i * 0.005;
                const offset = temps * (1 + i * 0.3);

                for(let x = 0; x <= C.W; x += 5) {
                    const y = merY + 10 + i * 15 + Math.sin(x * frequency + offset) * amplitude;
                    if(x === 0) ctx.moveTo(x, y);
                    else ctx.lineTo(x, y);
                }
                ctx.stroke();
            }
            ctx.restore();
        }

        // ContrÃ´les
        canvas.addEventListener('mousemove', e => {
            const rect = canvas.getBoundingClientRect();
            bateau.x = e.clientX - rect.left - C.PW/2;
            bateau.x = Math.max(0, Math.min(bateau.x, C.W - C.PW));
        });

        // Boucle de jeu
        function boucleJeu() {
            dessiner();
            requestAnimationFrame(boucleJeu);
        }

        // Redimensionnement
        window.addEventListener('resize', () => {
            size = setupCanvas();
            C.W = size.width;
            C.H = size.height;
        });

        // DÃ©marrage
        console.log("âœ… Petit Bateau initialisÃ©!");
        boucleJeu();
    </script>
</body>
</html>