<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>üîç Debug Modules - Voir la V√©rit√©</title>
    <style>
        body {
            font-family: monospace;
            background: #1a1a1a;
            color: #00ff00;
            padding: 20px;
        }
        .result {
            margin: 10px 0;
            padding: 10px;
            border: 1px solid #666;
            border-radius: 5px;
        }
        .success { color: #00ff00; background: #001100; }
        .error { color: #ff0000; background: #110000; }
        .info { color: #00aaff; background: #000011; }
    </style>
</head>
<body>
    <h1>üîç DEBUG MODULES</h1>
    <div id="results"></div>

    <script type="module">
        const results = document.getElementById('results');

        function log(message, type = 'info') {
            const div = document.createElement('div');
            div.className = `result ${type}`;
            div.textContent = message;
            results.appendChild(div);
            console.log(`[${type.toUpperCase()}] ${message}`);
        }

        async function debugModules() {
            try {
                log('üîç D√©but du debug des modules', 'info');

                // Test 1: Import direct du ModuleManager
                log('üì¶ Test 1: Import du ModuleManager...', 'info');
                const moduleImport = await import('./modules/index.js');
                const ModuleManager = moduleImport.default;
                log('‚úÖ ModuleManager import√© avec succ√®s', 'success');

                // Test 2: V√©rification de la structure
                log('üìä Test 2: Structure du ModuleManager...', 'info');
                log(`Graphics: ${Object.keys(ModuleManager.graphics || {})}`, 'info');
                log(`Systems: ${Object.keys(ModuleManager.systems || {})}`, 'info');
                log(`Config: ${!!ModuleManager.config}`, 'info');

                // Test 3: Test sp√©cifique du BoatRenderer
                log('üö¢ Test 3: Test du BoatRenderer...', 'info');
                if (ModuleManager.graphics && ModuleManager.graphics.boat) {
                    log('‚úÖ BoatRenderer disponible dans graphics.boat', 'success');
                    log(`Type: ${typeof ModuleManager.graphics.boat}`, 'info');
                    log(`M√©thode render: ${typeof ModuleManager.graphics.boat.render}`, 'info');

                    // Test de la m√©thode isAvailable
                    const isAvailable = ModuleManager.isAvailable('graphics', 'boat');
                    log(`isAvailable('graphics', 'boat'): ${isAvailable}`, isAvailable ? 'success' : 'error');
                } else {
                    log('‚ùå BoatRenderer NON disponible!', 'error');
                    log(`graphics: ${JSON.stringify(ModuleManager.graphics)}`, 'error');
                }

                // Test 4: Import direct du BoatRenderer
                log('üì¶ Test 4: Import direct du BoatRenderer...', 'info');
                const boatImport = await import('./modules/graphics/boat-renderer.js');
                const BoatRenderer = boatImport.default;
                log(`‚úÖ BoatRenderer direct: ${typeof BoatRenderer}`, 'success');
                log(`M√©thode render: ${typeof BoatRenderer.render}`, 'info');

                // Test 5: Comparaison
                log('üîç Test 5: Comparaison...', 'info');
                const sameReference = ModuleManager.graphics.boat === BoatRenderer;
                log(`M√™me r√©f√©rence: ${sameReference}`, sameReference ? 'success' : 'error');

                log('üéâ Debug termin√©', 'success');

            } catch (error) {
                log(`‚ùå Erreur: ${error.message}`, 'error');
                log(`Stack: ${error.stack}`, 'error');
            }
        }

        // D√©marrer le debug
        debugModules();
    </script>
</body>
</html>